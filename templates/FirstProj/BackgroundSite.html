{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html lang='en'>
<head>
  	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8">
    <title>RiskWatch: Disease Calculator</title>
	<link rel="stylesheet" type='text/css' href="{% static 'css/risk_styles.css' %}">
</head>

<body>
  <main id='site-background'>
    <div class='header'>
      <h1>
        Risk<span>Watch</span>
      </h1>
    </div>
    <div class='subheader'>
      <h2>
        Discover the Risk of Disease Worldwide
      </h2>
    </div>
    <hr>
    <form class='inputs' method="post" action="" id="submit-form">
      {% csrf_token %}
      <div class='disease'>
        <label class='tag'>Disease: </label>
        {% render_field form.dropdown class+="disease-input" %}
      </div>
      <div class='location'>
        <label class='tag'>Select a location: </label>
        {% render_field form.location class+="location-input" id="location-input" placeholder+="Location: " %}
      </div>
      <div class='map' id='map'><script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkqT5NcD8JHNfdPqy2iVWqkLDv9Kl208A&callback=initMap" id="mapScript"></script></div>
      <div class='submit'>
        <input type="submit" value="Calculate" id='submitButton'>
      </div>
    </form>
    <hr>
    <section class='results-main'>
    <div class='risk-result' id="risk-result"><p>{{ risk }}</p></div>
      <!--old div: <div class='graph' id='graph'></div>  -->
      <div class="graph-div" id="graph-div"><img src='data:image/png;base64,{{ graph }}' class='graph' id='graph'></div>
      <p class='percentile'>{{ text }}</p>
    </section>
    <section class='results-detailed' id="results-detailed">
      <p id='detailed-dropdown'>
        Detailed Analysis:
      </p>
      <p id='factors'>{{ factors }}</p>
      <!--This p element is updated once post data received, when inner text == 'show', hidden divs are shown -->
      <p id="hidden">{{ show }}</p>
    </section>
  </main>
  <script src="{% static 'js/risk_js.js' %}"></script>
</body>
</html>